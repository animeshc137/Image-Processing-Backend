name: Workflow with Independent Jobs

on:
  workflow_dispatch:
    inputs:
      run-step-1:
        description: 'Run Step 1?'
        required: true
        default: 'true'
        type: choice
        options:
          - 'true'
          - 'false'

jobs:
  step-1:
    runs-on: ubuntu-latest
    if: ${{ github.event.inputs.run-step-1 == 'true' }}
    steps:
      - name: Step 1 - Conditional Execution
        run: |
          echo "Step 1: Running because condition is true."

  step-2:
    runs-on: ubuntu-latest
    needs: [step-1]
    steps:
      - name: Step 2 - Processing
        if: ${{ needs.step-1.result == 'success' || github.event.inputs.run-step-1 == 'false' }}
        run: |
           echo "Step 2: Processing data."

  step-3:
    runs-on: ubuntu-latest
    needs: [step-2]
    steps:
      - name: Step 3 - Validating
        if: ${{ needs.step-2.result == 'success' }}
        run: |
           echo "Step 3: Validation successful."

  step-4:
    runs-on: ubuntu-latest
    needs: [step-3]
    steps:
      - name: Step 4 - Finalizing
        if: ${{ needs.step-3.result == 'success' }}
        run: |
           echo "Step 4: Finalization complete."
